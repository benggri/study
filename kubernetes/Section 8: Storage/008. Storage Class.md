# Storage Class

## PersistentVolume <-> PersistentVolumeClaim

```yml
# PersistentVolume.yaml |   | # PersistentVolumeClaim.yaml | 
apiVersion: v1          |   | apiVersion: v1               | 
kind: PersistentVolume  |   | kind: PersistentVolumeClaim  | 
metadata:               |   | metadata:                    | 
  name: pv              |   |  name: pvc                   | 
spec:                   |   | spec:                        | 
  accessModes:          |   |   accessModes:               | 
------------------------|   |------------------------------| 
    - ReadWriteOnce     |---|     - ReadWriteOnce          | # accessMode 가 일치해야함
------------------------|   |------------------------------| 
  capacity:             |   |   resources:                 | 
                        |   |     requests:                | 
------------------------|   |------------------------------| 
    storage: 1Gi        |---|       storage: 500Mi         | # PVC의 요청 용량이 PV의 용량보다 작거나 같아야함
------------------------|   |------------------------------| 
  hostPath:             |   |                              | 
    path: /tmp/data     |   |                              | 
```

## PersistentVolumeClaim <-> Pod

```yml
# PersistentVolumeClaim.yaml |   | # Pod.yaml                             |
apiVersion: v1               |   |  apiVersion: v1                        |
kind: PersistentVolumeClaim  |   |  kind: Pod                             |
metadata:                    |   |  metadata:                             |
-----------------------------|   |    name: mypod                         |
 name: pvc                   |_  |  spec:                                 |
-----------------------------| | |    containers:                         |
spec:                        | | |      - name: myfrontend                |
  accessModes:               | | |        image: nginx                    |
    - ReadWriteOnce          | | |        volumeMounts:                   |
  resources:                 | | |        - mountPath: "/var/www/html"    |
    requests:                | | |          name: mypd                    |
      storage: 500Mi         | | |    volumes:                            |
                             | | |      - name: mypd                      |
                             | | |        persistentVolumeClaim:          |
                             | | |----------------------------------------|
                             | |_|          claimName: pvc                | # PVC의 name과 Pod의 claimName 이 일치해야함
                             |   |----------------------------------------|
```